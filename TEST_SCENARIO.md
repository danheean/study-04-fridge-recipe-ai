# FridgeChef 테스트 시나리오

## 🎯 테스트 목표

Phase 4까지 구현된 FridgeChef 애플리케이션의 전체 기능을 테스트합니다.
AI 응답은 목(mock) 데이터를 사용하여 빠르게 테스트할 수 있습니다.

---

## 📋 사전 준비

### 1. 환경 설정

#### 백엔드
```bash
# 가상환경 활성화
source .venv/bin/activate

# 데모 사용자 생성 (최초 1회만)
cd backend
python create_demo_user.py

# 백엔드 서버 실행
uvicorn app.main:app --reload --port 8000
```

#### 프론트엔드
```bash
# 새 터미널에서
cd frontend
npm run dev
```

### 2. 브라우저 접속
- URL: http://localhost:5173
- 브라우저 개발자 도구(F12) 콘솔 열기 → 목 데이터 로그 확인

---

## 🧪 테스트 시나리오

### **시나리오 1: 이미지 업로드 및 재료 인식** ✅

**목표**: 이미지를 업로드하고 AI가 재료를 인식하는 과정 테스트

**단계**:
1. 홈 페이지에서 이미지 업로드 영역 확인
2. 이미지 파일 선택 또는 드래그 앤 드롭
   - 아무 이미지나 사용 가능 (냉장고 사진이 아니어도 됨)
3. "AI가 재료를 분석하고 있습니다..." 로딩 메시지 확인
4. 2초 후 재료 목록이 표시되는지 확인

**예상 결과**:
- ✅ 7개의 재료 표시 (계란, 우유, 토마토, 양파, 당근, 치즈, 베이컨)
- ✅ 각 재료에 수량 정보 표시
- ✅ 신선도 상태 표시 (초록색/노란색 배지)
- ✅ "레시피 생성하기" 버튼 활성화

**확인 포인트**:
- 콘솔에 `📸 [MOCK] 이미지 분석 중...` 로그 출력
- 콘솔에 `✅ [MOCK] 이미지 분석 완료` 로그 출력

---

### **시나리오 2: 재료 목록 편집** ✅

**목표**: 인식된 재료를 편집하는 기능 테스트

**단계**:
1. 재료 목록에서 특정 재료 삭제 (예: 베이컨)
2. 수동으로 재료 추가 (있는 경우)
3. 재료 개수 확인

**예상 결과**:
- ✅ 재료가 목록에서 제거됨
- ✅ 재료 카운트 업데이트 (예: 7개 → 6개)
- ✅ 추가한 재료가 목록에 표시됨

---

### **시나리오 3: 레시피 생성** ✅

**목표**: 재료를 기반으로 레시피를 생성하는 기능 테스트

**단계**:
1. "레시피 생성하기" 버튼 클릭
2. "레시피를 생성하고 있습니다..." 로딩 확인
3. 2.5초 후 레시피 카드 3개 표시 확인

**예상 결과**:
- ✅ 3개의 레시피 카드 표시:
  1. 토마토 치즈 오믈렛 (15분, 쉬움, 320kcal)
  2. 베이컨 야채 볶음밥 (20분, 쉬움, 480kcal)
  3. 크림 야채 스프 (30분, 보통, 280kcal)
- ✅ 각 레시피에 재료 목록 표시
- ✅ 보유한 재료는 일반 텍스트, 없는 재료는 줄 긋기 표시
- ✅ 조리 방법 단계별 표시
- ✅ "이 레시피 저장하기" 버튼 표시

**확인 포인트**:
- 콘솔에 `🍳 [MOCK] 레시피 생성 중...` 로그 출력
- 콘솔에 `✅ [MOCK] 레시피 생성 완료` 로그 출력

---

### **시나리오 4: 레시피 저장** ✅

**목표**: 마음에 드는 레시피를 저장하는 기능 테스트

**단계**:
1. 첫 번째 레시피 카드 (토마토 치즈 오믈렛) 확인
2. "이 레시피 저장하기" 버튼 클릭
3. 저장 중 로딩 확인
4. 버튼이 "저장 완료" 상태로 변경되는지 확인
5. 성공 알림 확인

**예상 결과**:
- ✅ 버튼이 잠시 로딩 상태로 변경
- ✅ "레시피가 저장되었습니다!" 알림 표시
- ✅ 버튼이 초록색으로 변경되고 "저장 완료" 텍스트 + 체크 아이콘 표시
- ✅ 버튼이 비활성화됨 (중복 저장 방지)

**추가 테스트**:
- 두 번째 레시피도 저장해보기
- 같은 레시피 다시 저장 시도 → "이미 저장된 레시피입니다." 알림 확인

---

### **시나리오 5: 프로필 페이지 - 저장된 레시피 확인** ✅

**목표**: 프로필 페이지에서 저장된 레시피를 확인하는 기능 테스트

**단계**:
1. 헤더의 "프로필" 링크 클릭
2. 프로필 페이지 로드 확인
3. 통계 카드 확인:
   - 저장된 레시피 수
   - 이미지 업로드 수
   - 가입일
4. "저장된 레시피" 탭에서 레시피 목록 확인

**예상 결과**:
- ✅ 사용자 이름 표시: "데모 사용자"
- ✅ 이메일 표시: "demo@fridgechef.com"
- ✅ 통계 카드:
  - 저장된 레시피: 2개 (방금 저장한 레시피들)
  - 이미지 업로드: 0개
  - 가입일: 오늘 날짜
- ✅ 레시피 카드 표시 (최신순):
  1. 베이컨 야채 볶음밥 (두 번째로 저장한 레시피)
  2. 토마토 치즈 오믈렛 (첫 번째로 저장한 레시피)
- ✅ 각 카드에 삭제 버튼(휴지통 아이콘) 표시

---

### **시나리오 6: 선호도 설정** ✅

**목표**: 사용자의 식단 선호도를 설정하는 기능 테스트

**단계**:
1. 프로필 페이지에서 "선호도 설정" 탭 클릭
2. 선호도 폼 확인
3. 각 필드에 값 입력:
   - 식단 제한: `채식`
   - 알레르기: `땅콩, 새우`
   - 제외할 재료: `고수, 셀러리`
   - 선호하는 요리: `한식, 이탈리아, 일식`
4. "선호도 저장" 버튼 클릭
5. 성공 알림 확인

**예상 결과**:
- ✅ 모든 필드가 쉼표로 구분된 값을 받아들임
- ✅ "선호도가 저장되었습니다." 알림 표시
- ✅ 페이지 새로고침 후에도 값이 유지됨

**추가 테스트**:
- 빈 값으로 저장 (기본값으로 리셋)
- 한글 입력 테스트
- 영문 입력 테스트

---

### **시나리오 7: 레시피 삭제** ✅

**목표**: 저장된 레시피를 삭제하는 기능 테스트

**단계**:
1. 프로필 페이지의 "저장된 레시피" 탭으로 이동
2. 첫 번째 레시피 카드의 휴지통 아이콘 클릭
3. 확인 다이얼로그에서 "확인" 클릭
4. 레시피가 목록에서 사라지는지 확인
5. 통계 카드의 "저장된 레시피" 숫자 감소 확인

**예상 결과**:
- ✅ "정말로 이 레시피를 삭제하시겠습니까?" 확인 다이얼로그 표시
- ✅ 레시피가 목록에서 제거됨
- ✅ "레시피가 삭제되었습니다." 알림 표시
- ✅ 통계 카드 업데이트: 2개 → 1개
- ✅ 남은 레시피만 표시됨

**추가 테스트**:
- 마지막 레시피까지 모두 삭제
- "저장된 레시피가 없습니다" 빈 상태 메시지 확인

---

### **시나리오 8: 전체 플로우 (종단 간 테스트)** ✅

**목표**: 처음부터 끝까지 전체 사용자 여정 테스트

**단계**:
1. **홈 페이지**: 냉장고 사진 업로드
2. **재료 확인**: 인식된 재료 확인 및 편집
3. **레시피 생성**: "레시피 생성하기" 버튼 클릭
4. **레시피 저장**: 마음에 드는 레시피 2-3개 저장
5. **프로필 확인**: 프로필 페이지로 이동하여 저장된 레시피 확인
6. **선호도 설정**: 식단 선호도 입력 및 저장
7. **레시피 관리**: 레시피 삭제 테스트
8. **홈으로 복귀**: 헤더의 FridgeChef 로고 클릭하여 홈으로 돌아가기
9. **새로 시작**: "새로 시작하기" 버튼 클릭하여 초기화

**예상 결과**:
- ✅ 모든 단계가 오류 없이 진행됨
- ✅ 페이지 간 이동이 원활함
- ✅ 데이터가 올바르게 저장되고 표시됨
- ✅ 사용자 경험이 자연스러움

---

## 🐛 알려진 제한사항

### 1. 목 데이터 사용
- AI 응답이 실제 이미지 내용과 무관하게 고정된 데이터를 반환합니다
- 어떤 이미지를 업로드해도 동일한 재료 목록이 표시됩니다

### 2. 세션 관리
- 현재 데모 사용자 ID가 하드코딩되어 있습니다 (`demo-user-123`)
- 실제 로그인/인증 기능은 구현되지 않았습니다

### 3. 이미지 저장
- 업로드한 이미지는 서버에 저장되지 않습니다
- 이미지는 재료 인식을 위해서만 사용됩니다

---

## 📊 테스트 체크리스트

완료된 항목에 체크하세요:

- [ ] 시나리오 1: 이미지 업로드 및 재료 인식
- [ ] 시나리오 2: 재료 목록 편집
- [ ] 시나리오 3: 레시피 생성
- [ ] 시나리오 4: 레시피 저장
- [ ] 시나리오 5: 프로필 페이지 - 저장된 레시피 확인
- [ ] 시나리오 6: 선호도 설정
- [ ] 시나리오 7: 레시피 삭제
- [ ] 시나리오 8: 전체 플로우 (종단 간 테스트)

---

## 🔧 실제 AI 사용 (선택사항)

목 데이터 대신 실제 OpenRouter API를 사용하려면:

1. `frontend/src/services/api.js` 파일에서 `USE_MOCK_DATA` 변수를 `false`로 변경
2. `.env` 파일에 `OPENROUTER_API_KEY` 설정 확인
3. 백엔드 서버가 실행 중인지 확인
4. 실제 냉장고 사진 업로드

---

## 💡 테스트 팁

1. **브라우저 개발자 도구 활용**:
   - Network 탭: API 요청/응답 확인
   - Console 탭: 목 데이터 로그 확인
   - Application 탭: 로컬 스토리지 확인

2. **다양한 시나리오 시도**:
   - 큰 이미지 (10MB 이상) 업로드 시도 → 에러 처리 확인
   - 이미지가 아닌 파일 업로드 시도 → 에러 처리 확인
   - 네트워크 끊기 시도 → 에러 처리 확인

3. **UI/UX 평가**:
   - 로딩 상태가 명확한가?
   - 에러 메시지가 이해하기 쉬운가?
   - 버튼 클릭 피드백이 즉각적인가?
   - 모바일 화면에서도 잘 보이는가? (개발자 도구에서 모바일 뷰 테스트)

---

## 📝 테스트 결과 기록

테스트 완료 후 아래에 결과를 기록하세요:

**테스트 일시**: _______________

**테스트 환경**:
- OS: _______________
- 브라우저: _______________
- 화면 크기: _______________

**발견된 버그**:
1.
2.
3.

**개선 제안**:
1.
2.
3.

**전체 평가** (1-5점): _____ / 5
